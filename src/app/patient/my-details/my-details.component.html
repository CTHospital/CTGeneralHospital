<!-- second section -->
<div [hidden]="block1">
  <div class="bounds backer" style="padding-left: 5px">
    <div class="content" fxLayout="row" fxLayout.xs="column" fxFlexFill>
      <div fxFlex="44" class="sec1" fxFlex.xs="55">
        <h1 style="color: white" class="heading" (click)="getfirstData()">My Demographic Details</h1>
        <br />
         Name &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : &nbsp;<span class="textc">
          {{ patientData?.firstName }}&nbsp;&nbsp;{{ patientData?.lastName }}</span
        ><br />
        <!-- Last Name &nbsp;&nbsp;&nbsp;:&nbsp;
        <span class="textc">{{ patientData?.lastName }} </span><br /> -->
        Date Of Birth &nbsp;:&nbsp;
        <span class="textc">{{ patientData?.dateOfBirth | date:'mediumDate'}} </span><br />
        Mobile NO &nbsp;&nbsp;&nbsp;&nbsp;: &nbsp;<span class="textc"
          >{{ patientData?.mobileNo }} </span
        ><br />
        Gender
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:
        &nbsp;<span class="textc">{{ patientData?.gender }} </span><br />
        Race&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:
        &nbsp;<span class="textc">{{ patientData?.race }} </span><br />
        Languages&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: &nbsp;<span class="textc"
          >{{ patientData?.language }} </span
        ><br />
        Address &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :
        &nbsp;<span class="textc">{{ patientData?.address }} </span><br />
      </div>

      <div fxFlex="44" fxFlex.xs="55" class="sec2">
        <h1 style="color: white" class="heading">My Emergency Contact</h1>
        <br />
        <table>
          Name &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : &nbsp;<span class="textc">{{
            patientData?.emergencyContactDetails?.firstName
          }}&nbsp;&nbsp;{{ patientData?.emergencyContactDetails?.lastName }}</span>
          <br />
          <!-- Last Name&nbsp;&nbsp;&nbsp;:&nbsp;
          <span class="textc"
            >{{ patientData?.emergencyContactDetails?.lastName }} </span
          ><br /> -->
          Relationship :&nbsp;<span class="textc">{{
            patientData?.emergencyContactDetails?.ralationship
          }}</span>
          <br />
          Mobile No&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: &nbsp;<span class="textc"
            >{{ patientData?.emergencyContactDetails?.mobileNo }} </span
          ><br />
          Email&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:
          &nbsp;<span class="textc"
            >{{ patientData?.emergencyContactDetails?.email }} </span
          ><br />
          Address &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : &nbsp;<span
            class="textc"
            >{{ patientData?.emergencyContactDetails?.address }} </span
          ><br />
          Access &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :
          &nbsp;<span class="textc"
            >{{ patientData?.emergencyContactDetails?.access }} </span
          ><br />
        </table>
      </div>
      <div fxFlex="7" fxFlex.xs="55" class="sec2">
        <button
          mat-raised-button
          type="button"
          style="top: 90px;"
          (click)="secondSection()"
          class="btn"
        >
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Edit&nbsp;&nbsp;&nbsp;<mat-icon aria-hidden="false" aria-label="Example home icon"
          >edit&nbsp;&nbsp;&nbsp;</mat-icon
        >
        </button>
        <button mat-raised-button class="btn" type="button">
          Download<mat-icon aria-hidden="false"  (click) = "downloadDetails()"  aria-label="Example home icon"
            >download</mat-icon
          >
        </button>
      </div>
    </div>
  </div>
  <br />
  
  <div class="center">
    <mat-card-header>
      <mat-card-title style="color: #0055d2">Allergy List</mat-card-title>
    </mat-card-header>
  </div>

  <mat-form-field appearance="standard">
    <mat-label>Search Allergy</mat-label>
    <input
      matInput
      (keyup)="applyFilter($event)"
      placeholder="Ex. ium"
      #input
    />
  </mat-form-field>

  <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
    <!-- meetingTitle Column -->
    <ng-container matColumnDef="AllergyId">
      <th mat-header-cell *matHeaderCellDef>AllergyId</th>
      <td mat-cell *matCellDef="let element">{{ element.allergyId }}</td>
    </ng-container>

    <!-- physician Column -->
    <ng-container matColumnDef="AllergyType">
      <th mat-header-cell *matHeaderCellDef>AllergyType</th>
      <td mat-cell *matCellDef="let element">{{ element.allergyType }}</td>
    </ng-container>

    <!-- specialisation Column -->
    <ng-container matColumnDef="AllergyName">
      <th mat-header-cell *matHeaderCellDef>AllergyName</th>
      <td mat-cell *matCellDef="let element">{{ element.allergyName }}</td>
    </ng-container>

    <!-- Symbol Column -->
    <ng-container matColumnDef="AllergyDescription">
      <th mat-header-cell *matHeaderCellDef>AllergyDescription</th>
      <td mat-cell *matCellDef="let element">
        {{ element.allergyDescription }}
      </td>
    </ng-container>

    <ng-container matColumnDef="ClinicalInformation">
      <th mat-header-cell *matHeaderCellDef>ClinicalInformation</th>
      <td mat-cell *matCellDef="let element">
        {{ element.clinicalInformation }}
      </td>
    </ng-container>

    <!-- <ng-container matColumnDef="appointmentTime">
      <th mat-header-cell *matHeaderCellDef>Time</th>
      <td mat-cell *matCellDef="let element">{{ element?.allergy?.allergyType  }}</td>
    </ng-container> -->

    <!-- <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef>Action</th>
      <td mat-cell *matCellDef="let element">
        <button
          mat-icon-button
          matTooltip="Click to Edit"
          class="iconbutton"
          color="primary"
        >
          <mat-icon
            aria-label="Edit"
            [state]="element"
            routerLink="/scheduling/edit-appointment/{{
              element.appointmentId
            }}"
            >edit</mat-icon
          >
          <mat-icon aria-label="Edit" (click)="navigateToUpdate(element.appointmentId)" >edit</mat-icon>
        </button>

        <button
          mat-icon-button
          matTooltip="Click to Delete"
          class="iconbutton"
          color="warn"
          
        >
          <mat-icon aria-label="Delete">delete</mat-icon>
        </button>
      </td>
    </ng-container> -->

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

    <!-- Row shown when there is no matching data. -->
    <tr class="mat-row" *matNoDataRow>
      <td class="mat-cell" colspan="4">
        No data matching the filter "{{ input.value }}"
      </td>
    </tr>
  </table>
  <!-- <h1>
    Thanks {{ firstName }} <br />
    for submitting Demographic as well as Emergency contact details
    Successfully.
  </h1>
  <br />
  If you want to edit Details click here -->
  <!-- <a
    type="button"
    (click)="secondSection()"
    style="color: yellow; cursor: pointer"
    >Edit</a
  > -->
</div>

<!-- third section -->

<div [hidden]="block2">
  <form [formGroup]="form" (ngSubmit)="updateDetails()">
    <div class="bounds">
      <div
        class="content"
        fxLayout="row"
        fxLayout.xs="column"
        fxFlexFill
        style="background-color: #bad2f7"
      >
        <div fxFlex="50" class="sec1" fxFlex.xs="55">
          <mat-card>
            <mat-card-content>
              <h1 class="head">Demographic Details</h1>
              <mat-form-field appearance="fill" class="pad w">
                <mat-label>First Name*</mat-label>
                <input
                  matInput
                  formControlName="firstName"
                  readonly
                /> </mat-form-field
              >&nbsp; &nbsp;
              <mat-form-field appearance="fill" class="pad w">
                <mat-label>Last Name*</mat-label>
                <input matInput formControlName="lastName" readonly />
              </mat-form-field>

              <mat-form-field appearance="fill" class="pad date w">
                <mat-label>Choose a date*</mat-label>
                <input
                  matInput
                  [matDatepicker]="picker1"
                  formControlName="dateOfBirth"
                  [max]="today"
                />
                <mat-datepicker-toggle
                  matSuffix
                  [for]="picker1"
                ></mat-datepicker-toggle>
                <mat-datepicker #picker1></mat-datepicker> </mat-form-field
              >&nbsp; &nbsp;
              <mat-form-field appearance="fill" class="pad w">
                <mat-label>Mobile No*</mat-label>
                <input matInput formControlName="mobileNo" /> </mat-form-field
              ><br />
              <div>
                <mat-radio-group
                  aria-label="Select an option"
                  formControlName="gender"
                >
                  <mat-label>Gender :</mat-label>&nbsp;

                  <mat-radio-button value="Male">Male</mat-radio-button>&nbsp;
                  &nbsp;
                  <mat-radio-button value="Female">Female</mat-radio-button>
                </mat-radio-group>
              </div>
              <br />
              <mat-form-field appearance="fill" class="pad w">
                <mat-label>Race</mat-label>
                <mat-select formControlName="race">
                  <mat-option *ngFor="let race of races" value="{{ race }}">{{
                    race
                  }}</mat-option>
                </mat-select> </mat-form-field
              >&nbsp; &nbsp;
              <mat-form-field appearance="fill" class="pad w">
                <mat-label>Ethnicity</mat-label>
                <mat-select formControlName="ethnicity">
                  <mat-option
                    *ngFor="let ethnicity of ethnicities"
                    value="{{ ethnicity }}"
                    
                    >{{ ethnicity }}</mat-option
                  >
                </mat-select>
              </mat-form-field>
              <div class="example-container">
                <mat-form-field
                  appearance="fill"
                  class="example-full-width wid pad"
                >
                  <mat-label>Enter your email</mat-label>
                  <input
                    matInput
                    placeholder="pat@example.com"
                    formControlName="email"
                    readonly
                  />
                </mat-form-field>
              </div>
              <div class="example-container">
                <mat-form-field appearance="fill" appearance="fill"
                class="example-full-width wid pad">
                  <mat-label>Known Languages</mat-label>
                  <mat-select formControlName="language" multiple>
                    <mat-select-trigger>
                      {{
                        form.get("language").value
                          ? form.get("language").value[0]
                          : ""
                      }}
                      <span
                        *ngIf="form.get('language').value?.length > 1"
                        class="example-additional-selection"
                      >
                        (+{{ form.get("language").value.length - 1 }}
                        {{
                          form.get("language").value.length === 2
                            ? "other"
                            : "others"
                        }})
                      </span>
                    </mat-select-trigger>
                    <mat-option
                      *ngFor="let language of languageList"
                      [value]="language"
                      >{{ language }}</mat-option
                    >
                  </mat-select>
                </mat-form-field>
              </div>

              <p>
                <mat-form-field
                  class="example-full-width wid"
                  appearance="fill"
                >
                  <mat-label>Address</mat-label>
                  <textarea
                    matInput
                    placeholder="Ex. 100 Main St"
                    formControlName="address"
                    [(ngModel)]="paddress"
                  ></textarea>
                </mat-form-field>
              </p>
              <div [hidden]="true">
                <h1 class="head">Allergies</h1>

                <div>
                  <mat-radio-group aria-label="Select an option">
                    <mat-label>Patient has any known allergies? :</mat-label>

                    <mat-radio-button
                      value="1"
                      (click)="allergyFalse($event)"
                      #event
                      >Yes</mat-radio-button
                    >&nbsp; &nbsp;
                    <mat-radio-button value="2" (click)="allergyTrue($event)"
                      >No</mat-radio-button
                    >
                  </mat-radio-group>
                </div>
              </div>
              <br />

              <div hidden="true">
                <div formArrayName="allergy">
                  <div
                    *ngFor="let data of allegyArray.controls; let i = index"
                    [formGroupName]="i"
                  >
                    <h1 class="head">Allergy No: {{ i + 1 }}</h1>
                    <mat-form-field appearance="fill" class="pad w">
                      <mat-label>AllergyId*</mat-label>
                      <mat-select formControlName="allergyId">
                        <mat-option
                          *ngFor="let allergydata of allergyI"
                          value="{{ allergydata }}"
                          >{{ allergydata }}</mat-option
                        >
                      </mat-select> </mat-form-field
                    >&nbsp; &nbsp;
                    <mat-form-field
                      appearance="fill"
                      class="example-full-width pad w"
                    >
                      <mat-label>Allergy Type</mat-label>
                      <mat-select formControlName="allergyType">
                        <mat-option
                          *ngFor="let allergyType of allergyT"
                          value="{{ allergyType }}"
                          >{{ allergyType }}</mat-option
                        >
                      </mat-select>
                    </mat-form-field>

                    <mat-form-field
                      appearance="fill"
                      class="example-full-width pad w"
                    >
                      <mat-label>Allergy Name</mat-label>
                      <mat-select formControlName="allergyName">
                        <mat-option
                          *ngFor="let allergyName of allergyN"
                          value="{{ allergyName }}"
                          >{{ allergyName }}</mat-option
                        >
                      </mat-select>
                      </mat-form-field
                    >&nbsp; &nbsp;

                    <mat-form-field
                      appearance="fill"
                      class="example-full-width pad w"
                    >
                      <mat-label>Allergy Description</mat-label>
                      <input matInput formControlName="allergyDescription" />
                    </mat-form-field>
                    <mat-form-field
                      appearance="fill"
                      class="example-full-width wid"
                    >
                      <mat-label>Allergy clinical information</mat-label>
                      <input matInput formControlName="clinicalInformation" />
                    </mat-form-field>
                    <button
                      mat-raised-button
                      color="primary"
                      type="button"
                      style="background-color: #03a66a; margin: 5px"
                      (click)="pushAllergy()"
                    >
                      <mat-icon>add</mat-icon>
                    </button>
                    <button
                      mat-raised-button
                      color="primary"
                      type="button"
                      style="background-color: #03a66a; margin: 5px"
                      (click)="removeAllergy(i)"
                    >
                      <mat-icon>remove</mat-icon>
                    </button>
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
        <div fxFlex="50" class="sec2" fxFlex.xs="40">
          <mat-card>
            <mat-card-content>
              <h1 class="head">Emergency Contact Information</h1>
              <div formGroupName="emergencyContactDetails">
                <mat-form-field appearance="fill" class="pad w">
                  <mat-label>First Name*</mat-label>
                  <input
                    matInput
                    formControlName="firstName"
                  /> </mat-form-field
                >&nbsp; &nbsp;
                <mat-form-field appearance="fill" class="pad w">
                  <mat-label>Last Name*</mat-label>
                  <input matInput formControlName="lastName" />
                </mat-form-field>
                <mat-form-field appearance="fill" class="pad w">
                  <mat-label>Relationship*</mat-label>
                  <mat-select formControlName="ralationship">
                    <mat-option
                      *ngFor="let relationship of list"
                      value="{{ relationship }}"
                      >{{ relationship }}</mat-option
                    >
                  </mat-select> </mat-form-field
                >&nbsp; &nbsp;
                <mat-form-field appearance="fill" class="pad w">
                  <mat-label>Mobile No*</mat-label>
                  <input matInput formControlName="mobileNo" />
                </mat-form-field>
                <div class="example-container">
                  <mat-form-field
                    appearance="fill"
                    class="example-full-width wid"
                  >
                    <mat-label>Enter your email</mat-label>
                    <input
                      matInput
                      placeholder="pat@example.com"
                      required
                      formControlName="email"
                    />
                  </mat-form-field>
                </div>
                <mat-checkbox class="example-margin"
                (click)="chackBox()"
                  >Same as per patient</mat-checkbox
                >

                <p>
                  <mat-form-field
                    class="example-full-width wid"
                    appearance="fill"
                  >
                    <mat-label>Address</mat-label>
                    <textarea
                      matInput
                      placeholder="Ex. 100 Main St"
                      formControlName="address"
                      [(ngModel)]="eaddress"
                    ></textarea>
                  </mat-form-field>
                </p>
                <div>
                  <mat-radio-group
                    aria-label="Select an option"
                    formControlName="access"
                  >
                    <mat-label
                      >Do you need to access patient portal? :</mat-label
                    >

                    <mat-radio-button value="Yes">Yes</mat-radio-button>&nbsp;
                    &nbsp;
                    <mat-radio-button value="No">No</mat-radio-button>
                  </mat-radio-group>
                </div>
              </div>

              <br />
              <!-- <div [hidden]="isRegister">
                        <button
                          mat-raised-button
                          color="primary"
                          style="background-color: #03a66a; width: 50vh"
                          class="example-full-width"
                          type="submit"
                          mat-stroked-button
                        >
                          Submit
                        </button>
                      </div> -->

              <div>
                <button
                  mat-raised-button
                  color="primary"
                  type="submit"
                  style="background-color: #ddc34d; width: 50vh"
                  class="example-full-width"
                  mat-stroked-button
                >
                  Update
                </button>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
        <!-- <div fxFlex="20" class="sec1" fxFlex.xs="55">
          <mat-card
            style="background-color: rgb(176, 201, 202); height: fit-content"
            ><h1 class="head" style="text-align: center">Inbox</h1>
            <mat-card-content
              >Lorem ipsum dolor sit amet consectetur adipisicing elit.
              Voluptate facilis soluta beatae, commodi sunt ipsa aut molestias
              perspiciatis voluptatibus amet ex officiis ipsam doloribus id
              reiciendis quas est necessitatibus natus aliquam. Suscipit quis
              voluptates deserunt eligendi libero aspernatur atque eaque quam
              delectus cupiditate. Aspernatur perferendis odit hic voluptates
              asperiores aliquam!</mat-card-content
            ></mat-card
          >
        </div> -->
      </div>
    </div>
  </form>
</div>
