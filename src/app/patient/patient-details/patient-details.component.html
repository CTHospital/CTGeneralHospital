
<div [hidden]="section1">
  <mat-stepper linear #stepper>
    <mat-step [editable]="isEditable">
      <form [formGroup]="form"> 
        <ng-template matStepLabel>Demographic and Emergency Contact Information</ng-template>
        <div class="bounds">
          <div class="content" fxLayout="row" fxLayout.xs="column" fxFlexFill>
            <div fxFlex="50" class="sec1" fxFlex.xs="55">
        <mat-card>
          <mat-card-content>
            <h1 class="head">Demographic Details</h1>
            <mat-form-field appearance="fill" class="pad w">
              <mat-label>First Name*</mat-label>
              <input matInput formControlName="firstName" /> </mat-form-field
            >&nbsp; &nbsp;
            <mat-form-field appearance="fill" class="pad w">
              <mat-label>Last Name*</mat-label>
              <input matInput formControlName="lastName" />
            </mat-form-field>
  
            <mat-form-field appearance="fill" class="pad date w">
              <mat-label>Choose a date*</mat-label>
              <input
                matInput
                [matDatepicker]="picker"
                formControlName="dateOfBirth"
                [max]="today"
              />
              <mat-datepicker-toggle
                matSuffix
                [for]="picker"
              ></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker> </mat-form-field
            >&nbsp; &nbsp;
            <mat-form-field appearance="fill" class="pad w">
              <mat-label>Mobile No*</mat-label>
              <input matInput formControlName="mobileNo" /> </mat-form-field
            ><br />
            <div>
              <mat-radio-group
                aria-label="Select an option"
                formControlName="gender"
              >
                <mat-label>Gender :</mat-label>&nbsp;
  
                <mat-radio-button value="Male">Male</mat-radio-button>&nbsp;
                &nbsp;
                <mat-radio-button value="Female">Female</mat-radio-button>
              </mat-radio-group>
            </div>
            <br />
            <mat-form-field appearance="fill" class="pad w">
              <mat-label>Race</mat-label>
              <!-- <input matInput formControlName="race" /> -->
              <mat-select formControlName="race">
                <mat-option *ngFor="let race of races" value="{{ race }}">{{
                  race
                }}</mat-option>
              </mat-select> </mat-form-field
            >&nbsp; &nbsp;
            <mat-form-field appearance="fill" class="pad w">
              <mat-label>Ethnicity</mat-label>
              <!-- <input matInput formControlName="ethnicity" /> -->
              <mat-select formControlName="ethnicity">
                <mat-option
                  *ngFor="let ethnicity of ethnicities"
                  value="{{ ethnicity }}"
                  >{{ ethnicity }}</mat-option
                >
              </mat-select>
            </mat-form-field>
            <div class="example-container">
              <mat-form-field
                appearance="fill"
                class="example-full-width wid pad"
              >
                <mat-label>Enter your email</mat-label>
                <input
                  matInput
                  placeholder="pat@example.com"
                  formControlName="email"
                />
              </mat-form-field>
            </div>
            <div class="example-container">
              <mat-form-field appearance="fill">
                <mat-label>Known Languages</mat-label>
                <mat-select formControlName="language" multiple>
                  <mat-select-trigger>
                    {{
                      form.get("language").value
                        ? form.get("language").value[0]
                        : ""
                    }}
                    <span
                      *ngIf="form.get('language').value?.length > 1"
                      class="example-additional-selection"
                    >
                      (+{{ form.get("language").value.length - 1 }}
                      {{
                        form.get("language").value.length === 2
                          ? "other"
                          : "others"
                      }})
                    </span>
                  </mat-select-trigger>
                  <mat-option
                    *ngFor="let language of languageList"
                    [value]="language"
                    >{{ language }}</mat-option
                  >
                </mat-select>
              </mat-form-field>
            </div>
  
            <p>
              <mat-form-field
                class="example-full-width wid"
                appearance="fill"
              >
                <mat-label>Address</mat-label>
                <textarea
                  matInput
                  placeholder="Ex. 100 Main St"
                  formControlName="address"
                  [(ngModel)]="paddress"
                ></textarea>
              </mat-form-field>
            </p>
            <br />
          </mat-card-content>
        </mat-card>
            </div>
            <div fxFlex="50" class="sec2" fxFlex.xs="40">
              <mat-card>
                <mat-card-content>
                  <h1 class="head">Emergency Contact Information</h1>
                  <div formGroupName="emergencyContactDetails">
                    <mat-form-field appearance="fill" class="pad w">
                      <mat-label>First Name*</mat-label>
                      <input
                        matInput
                        formControlName="firstName"
                      /> </mat-form-field
                    >&nbsp; &nbsp;
                    <mat-form-field appearance="fill" class="pad w">
                      <mat-label>Last Name*</mat-label>
                      <input matInput formControlName="lastName" />
                    </mat-form-field>
                    <mat-form-field appearance="fill" class="pad w">
                      <mat-label>Relationship*</mat-label>
                      <mat-select formControlName="ralationship">
                        <mat-option
                          *ngFor="let ralationship of list"
                          value="{{ ralationship }}"
                          >{{ ralationship }}</mat-option
                        >
                      </mat-select> </mat-form-field
                    >&nbsp; &nbsp;
                    <mat-form-field appearance="fill" class="pad w">
                      <mat-label>Mobile No*</mat-label>
                      <input matInput formControlName="mobileNo" />
                    </mat-form-field>
                    <div class="example-container">
                      <mat-form-field
                        appearance="fill"
                        class="example-full-width wid"
                      >
                        <mat-label>Enter your email</mat-label>
                        <input
                          matInput
                          placeholder="pat@example.com"
                          required
                          formControlName="email"
                        />
                      </mat-form-field>
                    </div>
                    <mat-checkbox
                      class="example-margin"
                      id="checkBox"
                      (click)="chackBox()"
                      >Same as per patient</mat-checkbox
                    >
    
                    <p>
                      <mat-form-field
                        class="example-full-width wid"
                        appearance="fill"
                      >
                        <mat-label>Address</mat-label>
                        <textarea
                          matInput
                          placeholder="Ex. 100 Main St"
                          formControlName="address"
                          [(ngModel)]="eaddress"
                        ></textarea>
                      </mat-form-field>
                    </p>
                    <div>
                      <mat-radio-group
                        aria-label="Select an option"
                        formControlName="access"
                      >
                        <mat-label
                          >Do you need to access patient portal? :</mat-label
                        >
    
                        <mat-radio-button value="Yes">Yes</mat-radio-button>&nbsp;
                        &nbsp;
                        <mat-radio-button value="No">No</mat-radio-button>
                      </mat-radio-group>
                    </div>
                  </div>
    
                  <br />
                  <div [hidden]="isRegister">
                    <button
                      mat-raised-button
                      color="primary"
                      style="background-color: #03a66a; width: 50vh"
                      class="example-full-width"
                      type="button"
                      matTooltip="Click here to submit patientDetails"
                      mat-stroked-button
                      class="example-button"
                      matTooltipClass="example-tooltip-red"
                      (click)="submitDetails()"
                      matStepperNext
                    >
                      Submit
                    </button>
                  </div>
                </mat-card-content>
              </mat-card>
            </div>
            
          </div>
          
          </div>
      </form>
    </mat-step>
    <mat-step >
      <form [formGroup]="allergyForm"> 
        <ng-template matStepLabel>Allergies</ng-template>
  
              <!-- <mat-form-field appearance="fill" class="pad w">
                <mat-label>AllergyId*</mat-label>
                <mat-select formControlName="allergyId">
                  <mat-option
                    *ngFor="let allergydata of allergyI"
                    value="{{ allergydata }}"
                    >{{ allergydata }}</mat-option
                  >
                </mat-select> </mat-form-field
              >&nbsp; &nbsp; -->
              <mat-form-field
                appearance="fill"
                class="example-full-width pad w"
              >
                <mat-label>Allergy Type</mat-label>
  
                <mat-select  formControlName="allergyType" (ngModelChange)="onChangeType($event)">
                  <mat-option
                    *ngFor="let allergyType of allergyT"
                    value="{{ allergyType }}"
                    
                    >{{ allergyType }}</mat-option
                  >
                </mat-select>
              </mat-form-field>
              &nbsp; &nbsp;
              <mat-form-field
                appearance="fill"
                class="example-full-width pad w"
              >
                <mat-label>Allergy Name</mat-label>
  
                <mat-select formControlName="allergyName">
                  <mat-option
                    *ngFor="let allergyName of allergyN"
                    value="{{ allergyName }}"
                    >{{ allergyName }}</mat-option
                  >
                </mat-select> </mat-form-field
              >&nbsp; &nbsp;
  
              <mat-form-field
                appearance="fill"
                class="example-full-width pad w"
              >
                <mat-label>Allergy Description</mat-label>
                <input matInput  formControlName="allergyDescription"/>
              </mat-form-field>&nbsp; &nbsp;
              <mat-form-field
                appearance="fill"
                class="example-full-width wid"
              >
                <mat-label>Allergy clinical information</mat-label>
                <input matInput  formControlName="clinicalInformation"/>
              </mat-form-field>
              <button
                mat-raised-button
                color="primary"
                type="button"
                (click)="pushAllergy()"
                style="background-color: #03a66a; margin: 5px"
              >
                <mat-icon>add</mat-icon>
              </button>
              <button
                mat-raised-button
                color="primary"
                type="button"
                (click)="submitAllergy()"
                
                style="background-color: #03a66a; margin: 5px;width: 50%;"
              >
                <mat-icon>done</mat-icon>
              </button>
            </form>
        
      
    </mat-step>
    
  </mat-stepper>
  </div>
  
  <div [hidden]="section4" class="success">You have successfully submitted your details</div>
  <router-outlet></router-outlet>
  